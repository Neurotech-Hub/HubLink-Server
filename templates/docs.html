<!doctype html>
<html lang="en">

<head>
    {% include 'head.html' %}
    <style>

    </style>
</head>

<body>
    {% include 'nav.html' %}

    <div class="container mt-5">

        <!-- Endpoint Summary Section -->
        <section class="mb-5">
            <h2 class="text-primary border-bottom pb-2 mb-4">Endpoint Summary</h2>
            <p>Here is an overview of the available API endpoints:</p>
            <ul class="list-unstyled ms-3">
                <li class="mb-2"><strong>Account Dashboard:</strong> View specific account activity.
                    (<code>/&lt;account_url&gt;</code>)
                </li>
                <li class="mb-2"><strong>Account JSON API:</strong> Retrieve account settings in JSON format.
                    (<code>/&lt;account_url&gt;.json</code>)
                </li>
                <li class="mb-2"><strong>Account Settings:</strong> View and update settings per account.
                    (<code>/&lt;account_url&gt;/settings</code>)
                </li>
                <li class="mb-2"><strong>Data Management:</strong> Access collected data and download links.
                    (<code>/&lt;account_url&gt;/data</code>)
                </li>
                <li class="mb-2"><strong>File Existence API:</strong> Check if specified files exist in the cloud.
                    (<code>/&lt;account_url&gt;/files</code>)
                </li>
                <li class="mb-2"><strong>Sync:</strong> Force a sync of S3 data for an account.
                    (<code>/&lt;account_url&gt;/sync</code>)
                </li>
            </ul>
        </section>

        <!-- API Examples Section -->
        <section class="mb-5">
            <h2 class="text-primary border-bottom pb-2 mb-4">API Access Examples</h2>

            <!-- JSON API Example -->
            <h3 class="mt-4">Retrieve Account Settings (JSON)</h3>
            <p><strong>Endpoint:</strong> <code>/&lt;account_url&gt;.json</code></p>
            <p>This endpoint retrieves the account settings in JSON format.</p>

            <div class="p-3 border rounded">
                <h4>Example cURL Request:</h4>
                <pre><code>curl -X GET "https://yourdomain.com/&lt;account_url&gt;.json"</code></pre>

                <h4>Example Python Request:</h4>
                <pre><code>import requests

response = requests.get("https://yourdomain.com/&lt;account_url&gt;.json")
if response.status_code == 200:
    data = response.json()
    print(data)
else:
    print("Error:", response.status_code)
</code></pre>
            </div>

            <!-- Update Settings Example -->
            <h3 class="mt-5">Update Account Settings</h3>
            <p><strong>Endpoint:</strong> <code>/&lt;account_url&gt;/settings/update</code> (POST)</p>
            <p>Updates account settings by submitting form data. Note: This requires specific fields such as AWS keys,
                bucket name, and others.</p>

            <div class="p-3 border rounded">
                <h4>Example cURL Request:</h4>
                <pre><code>curl -X POST "https://yourdomain.com/&lt;account_url&gt;/settings/update" \
-H "Content-Type: application/x-www-form-urlencoded" \
-d "aws_access_key_id=YOUR_KEY&aws_secret_access_key=YOUR_SECRET&bucket_name=YOUR_BUCKET"
</code></pre>

                <h4>Example Python Request:</h4>
                <pre><code>import requests

url = "https://yourdomain.com/&lt;account_url&gt;/settings/update"
data = {
    "aws_access_key_id": "YOUR_KEY",
    "aws_secret_access_key": "YOUR_SECRET",
    "bucket_name": "YOUR_BUCKET"
}
response = requests.post(url, data=data)
print("Status:", response.status_code)
</code></pre>
            </div>

            <!-- File Existence API Example -->
            <h3 class="mt-5">Check File Existence</h3>
            <p><strong>Endpoint:</strong> <code>/&lt;account_url&gt;/files</code> (POST)</p>
            <p>Check if specific files exist in the cloud storage for an account. Send a JSON array of files with
                <code>filename</code> and <code>size</code> keys.
            </p>

            <div class="p-3 border rounded">
                <h4>Example cURL Request:</h4>
                <pre><code>curl -X POST "https://yourdomain.com/&lt;account_url&gt;/files" \
-H "Content-Type: application/json" \
-d '{"files": [{"filename": "example.txt", "size": 1024}]}'</code></pre>

                <h4>Example Python Request:</h4>
                <pre><code>import requests

url = "https://yourdomain.com/&lt;account_url&gt;/files"
data = {
    "files": [
        {"filename": "example.txt", "size": 1024}
    ]
}
response = requests.post(url, json=data)
print("Response:", response.json())
</code></pre>
            </div>

            <!-- Sync Endpoint Example -->
            <h3 class="mt-5">Sync Account Data</h3>
            <p><strong>Endpoint:</strong> <code>/&lt;account_url&gt;/sync</code> (GET)</p>
            <p>Forces a sync with S3 for the account to update files in the cloud.</p>

            <div class="p-3 border rounded">
                <h4>Example cURL Request:</h4>
                <pre><code>curl -X GET "https://yourdomain.com/&lt;account_url&gt;/sync"</code></pre>

                <h4>Example Python Request:</h4>
                <pre><code>import requests

response = requests.get("https://yourdomain.com/&lt;account_url&gt;/sync")
print("Status:", response.status_code)
</code></pre>
            </div>
        </section>
    </div>
</body>

</html>